<div class="compact-profile-dialog">
  <!-- Header with user info -->
  <div class="profile-header">
    <div class="avatar-container">
      <img 
        [src]="data.pictureUrl || 'assets/images/default-profile.png'"
        alt="Photo de profil"
        class="avatar-image"
      />
      <div class="status-indicator"></div>
    </div>
    
    <div class="user-info">
      <h2 class="user-name">{{ getDisplayName() }}</h2>
      <p class="user-email">{{ getSecondaryIdentifier() }}</p>
    </div>
    
    <button 
      mat-icon-button 
      class="close-btn"
      (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Content avec scroll -->
  <div class="profile-content">
    <!-- Quick stats - SUPPRESSION de la section Évaluations -->
    <div class="stats-row">
      <!-- Note moyenne -->
      <div class="stat-item">
        <mat-icon>star</mat-icon>
        <span class="stat-value" 
              [style.color]="getRatingColor()">
          <ng-container *ngIf="isLoadingStats">
            <mat-spinner diameter="16"></mat-spinner>
          </ng-container>
          <ng-container *ngIf="!isLoadingStats">
            {{ averageRating }}
          </ng-container>
        </span>
        <span class="stat-label">Note moyenne</span>
        
        <!-- Affichage des étoiles -->
        <div class="stars-display" *ngIf="shouldShowStars()">
          <mat-icon *ngFor="let star of getStarArray()" 
                    [class.filled]="star"
                    class="star-mini">
            {{ star ? 'star' : 'star_border' }}
          </mat-icon>
        </div>
      </div>
      
      <!-- Nombre de compétences -->
      <div class="stat-item">
        <mat-icon>school</mat-icon>
        <span class="stat-value">
          <ng-container *ngIf="isLoadingStats">
            <mat-spinner diameter="16"></mat-spinner>
          </ng-container>
          <ng-container *ngIf="!isLoadingStats">
            {{ skillsCount }}
          </ng-container>
        </span>
        <span class="stat-label">Compétences</span>
      </div>
    </div>

    <!-- Message d'erreur pour les stats -->
    <div class="stats-error" *ngIf="statsError && !isLoadingStats">
      <mat-icon>warning</mat-icon>
      <span>Statistiques non disponibles</span>
    </div>

    <!-- Details avec zone scrollable -->
    <div class="details-section">
      <div class="detail-item">
        <mat-icon>account_circle</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Nom d'utilisateur</span>
          <span class="detail-value">{{ data.username }}</span>
        </div>
      </div>

      <div class="detail-item" *ngIf="data.phoneNumber">
        <mat-icon>phone</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Téléphone</span>
          <span class="detail-value">{{ data.phoneNumber }}</span>
        </div>
      </div>

      

      <div class="detail-item" *ngIf="data.bio">
        <mat-icon>description</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Biographie</span>
          <span class="detail-value bio-text">{{ data.bio }}</span>
        </div>
      </div>

      <div class="detail-item">
        <mat-icon>schedule</mat-icon>
        <div class="detail-content">
          <span class="detail-label">Membre depuis</span>
          <span class="detail-value">{{ data.createdAt | date:'dd/MM/yyyy' }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="profile-footer">
    <button 
      mat-raised-button 
      color="primary"
      (click)="closeDialog()"
      class="action-btn">
      Fermer
    </button>
  </div>
</div>