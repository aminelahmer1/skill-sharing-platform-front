<div class="receiver-calendar-page">
  <!-- Header minimaliste -->
  <div class="calendar-header-section">
    <h1 class="calendar-main-title">
      <span class="title-gradient">ğŸ“š Mon Planning d'Apprentissage</span>
    </h1>
    
    <!-- Statistiques simplifiÃ©es -->
    <div class="quick-stats">
      <div class="stat-bubble live" *ngIf="stats.liveSessions > 0">
        <span class="stat-icon">ğŸ”´</span>
        <span class="stat-text">{{ stats.liveSessions }} EN DIRECT</span>
      </div>
      <div class="stat-bubble accepted">
        <span class="stat-icon">âœ¨</span>
        <span class="stat-text">{{ stats.acceptedSessions }} acceptÃ©es</span>
      </div>
      <div class="stat-bubble completed">
        <span class="stat-icon">ğŸ“</span>
        <span class="stat-text">{{ stats.completedSessions }} complÃ©tÃ©es</span>
      </div>
    </div>
  </div>

  <!-- Sessions du jour -->
  <div class="live-section" *ngIf="todayEvents.length > 0">
    <div class="section-subtitle">Sessions d'aujourd'hui</div>
    
    <div class="live-card" 
         *ngFor="let event of todayEvents"
         [class.completed-card]="event.status === 'COMPLETED'"
         [class.live-card-active]="event.status === 'IN_PROGRESS'">
      
      <!-- Indicateur de statut -->
      <div class="status-indicator"
           [ngClass]="{
             'live-indicator': event.status === 'IN_PROGRESS',
             'completed-indicator': event.status === 'COMPLETED',
             'scheduled-indicator': event.status === 'SCHEDULED' || event.status === 'ACCEPTED'
           }">
        <span class="pulse-dot" *ngIf="event.status === 'IN_PROGRESS'"></span>
        <span class="status-icon" *ngIf="event.status === 'COMPLETED'">âœ…</span>
        <span class="status-icon" *ngIf="event.status === 'SCHEDULED' || event.status === 'ACCEPTED'">ğŸ•</span>
        {{ getEventStatusLabel(event) }}
      </div>
      
      <!-- Contenu de la session -->
      <div class="session-content">
        <h3 [class.completed-title]="event.status === 'COMPLETED'">
          {{ event.skillName }}
        </h3>
        <p class="session-trainer">
          <span class="trainer-icon">ğŸ‘¨â€ğŸ«</span>
          {{ event.producerName }}
        </p>
        <div class="session-time">
          <span class="time-icon">â°</span>
          <span [class.time-crossed]="isEarlyCompleted(event)">
            {{ event.streamingTime }}
          </span>
          <span class="early-completed-badge" *ngIf="isEarlyCompleted(event)">
            TerminÃ© plus tÃ´t
          </span>
        </div>
      </div>
      
      <!-- Actions -->
      <div class="session-actions">
        <button 
          class="btn-join-session"
          *ngIf="event.status === 'IN_PROGRESS'"
          (click)="joinLiveSession(event)">
          Rejoindre maintenant
        </button>
        
        <div class="completed-status" *ngIf="event.status === 'COMPLETED'">
          <span class="completed-text">Session terminÃ©e</span>
        </div>
        
        <div class="time-until" 
             *ngIf="event.status === 'SCHEDULED' || event.status === 'ACCEPTED'">
          {{ getTimeRemaining(event.streamingDate) }}
        </div>
      </div>
    </div>
  </div>

  <!-- Indicateur de chargement -->
  <div class="loading-overlay" *ngIf="loading">
    <div class="loader"></div>
  </div>

  <!-- Message d'erreur -->
  <div class="error-message" *ngIf="error && !loading">
    <p>âš ï¸ {{ error }}</p>
    <button class="btn-retry" (click)="refreshCalendar()">RÃ©essayer</button>
  </div>

  <!-- Calendrier principal -->
  <div class="calendar-main" *ngIf="!loading && !error">
    <app-calendar-base
      [userRole]="'RECEIVER'"
      [events]="processedEvents"
      (eventClick)="onEventClick($event)"
      (dateClick)="onDateClick($event)"
      (viewChange)="onViewChange($event)">
    </app-calendar-base>
  </div>

  <!-- Ã‰tat vide -->
  <div class="empty-calendar" *ngIf="!loading && !error && events.length === 0">
    <div class="empty-illustration">ğŸ“­</div>
    <h3>Aucune session inscrite</h3>
    <p>Inscrivez-vous Ã  des formations pour les voir apparaÃ®tre ici</p>
  </div>
</div>